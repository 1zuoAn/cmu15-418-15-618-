# ISPC 任务
## 使用命令行选项“- tasks”运行 mandelbrot_ispc 你在视图 1 上观察到什么样的加速？ mandelbrot_ispc 版本的加速比是多少，它没有将计算分成任务？ 
-t 表示的是多核加速 mandelbrot_ispc 就是 ispc编译器帮我们写好了向量化语句，并没有将计算分成任务。
## 起始代码总是产生 4 个任务。这适用于我们给你的图像尺寸、块宽和块高，但在一般情况下并不适用。在启动任务之前，修改 taskCount 的计算，以便对于任何映像和数据块大小都始终正确工作。  
详见代码
## 有一种简单的方法可以通过增加代码创建的任务数量来提高 mandelbrot_ispc - tasks 的性能。仅 通过更改块宽度和块高度的值，您应该能够获得超过顺序版本代码大约 20-22 倍的性能！什么样的区域大小和形状效果最好？(你喜欢高的、宽的还是方的街区？)  
显然，方的“街区”会更好。不同本机（根据核数的不同）最终的加速比也会不同，我在本机上跑的，最高加速比可以达到 30 - 34倍  
![HXB@6X$Y(P0@~J80JV9HZA3](https://user-images.githubusercontent.com/97599487/195967454-764de518-b2e8-4fd8-800c-9076c85c8174.png)  
其实这里的话，我是开了16个任务，因为我本机是16核，在4 8 16 的时候，加速比明显是线性提升的，但在16 25 甚至100 10000的时候，加速比反而略微下降，堪堪达到25倍左右。  
如果要分析背后的原因，16任务以上加速比不增加了是一个方面，因为再多任务数，也没有那么多核进行并行，而是分配到不同核下的线程中，进行的是并发，而若任务数太夸张，加速比下降，大概是因为将任务太过细分，会造成单个任务的耗时增加，但为啥100倍和10000倍差不多，我也没想明白
## 额外加分:(1 分)Pthread 抽象(在问题 1 中使用)和 ISPC 任务抽象之间有什么区别？(创建/加入) 和(启动/同步)机制在语义上有一些明显的区别，但是这些区别的含义更加微妙。这里有一个思 维实验来指导你的答案:当你启动 10，000 个 ISPC 任务时会发生什么？发射一万个 pthreads 会 怎么样？额外加分:(1 分)Pthread 抽象(在问题 1 中使用)和 ISPC 任务抽象之间有什么区别？(创建/加入) 和(启动/同步)机制在语义上有一些明显的区别，但是这些区别的含义更加微妙。这里有一个思 维实验来指导你的答案:当你启动 10，000 个 ISPC 任务时会发生什么？发射一万个 pthreads 会 怎么样？
想回答时，发现仅凭自己浅薄的知识，无法给出一个清晰有效的答案来区分这两者，太笼统的答案又显得毫无意义。  
https://zhuanlan.zhihu.com/p/522917702 https://zhuanlan.zhihu.com/p/516448932 这里给出参考链接。
